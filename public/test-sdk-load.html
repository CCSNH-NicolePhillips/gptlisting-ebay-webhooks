<!DOCTYPE html>
<html>
<head>
  <title>SDK Load Test</title>
</head>
<body>
  <h1>Testing Auth0 SDK Loading</h1>
  <div id="status">Loading...</div>
  
  <script>
    console.log('[Test] Starting SDK load test');
    
    // Test 1: Load via script tag
    const script = document.createElement('script');
    script.src = '/.netlify/functions/cdn-auth0-spa?v=2.1';
    script.onload = () => {
      console.log('[Test] Script loaded successfully');
      const status = document.getElementById('status');
      
      if (window.createAuth0Client) {
        status.innerHTML = '✅ SUCCESS: window.createAuth0Client exists!<br>';
        status.innerHTML += 'Type: ' + typeof window.createAuth0Client;
        console.log('[Test] window.createAuth0Client:', window.createAuth0Client);
      } else if (window.auth0 && window.auth0.createAuth0Client) {
        status.innerHTML = '✅ SUCCESS: window.auth0.createAuth0Client exists!<br>';
        status.innerHTML += 'Type: ' + typeof window.auth0.createAuth0Client;
        console.log('[Test] window.auth0.createAuth0Client:', window.auth0.createAuth0Client);
      } else {
        status.innerHTML = '❌ FAILED: Neither window.createAuth0Client nor window.auth0.createAuth0Client exists<br>';
        status.innerHTML += 'window.auth0: ' + (window.auth0 ? JSON.stringify(Object.keys(window.auth0)) : 'undefined') + '<br>';
        status.innerHTML += 'All window properties with "auth": ' + Object.keys(window).filter(k => k.toLowerCase().includes('auth')).join(', ');
        console.log('[Test] window.auth0:', window.auth0);
        console.log('[Test] window properties:', Object.keys(window).filter(k => k.toLowerCase().includes('auth')));
      }
    };
    
    script.onerror = (e) => {
      console.error('[Test] Script failed to load:', e);
      document.getElementById('status').innerHTML = '❌ FAILED: Script tag failed to load<br>Error: ' + e;
    };
    
    console.log('[Test] Appending script tag...');
    document.head.appendChild(script);
  </script>
</body>
</html>
